<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //(4 + 3) * 2 - 1 = 13
        
        //callback함수 선언
        /*
        function add(num1,num2,callback){
            setTimeout(() => {
                const result = num1 + num2;
                callback(result);
            },1000);
        }
        function mul(num,callback) {
            setTimeout(()=> {
                const result = num * 2;
                callback(result);
            },700);
        }
        function sub(num,callback) {
            setTimeout(()=>{
                const result = num - 1;
                callback(result);
            },500);
        }
        */

        //실행
        /*
        add(4,3,function(x){
            console.log(`1: ${x}`);
            mul(x,function(y){
                console.log(`2: ${y}`)
                sub(y,function(z){
                    console.log(`3: ${z}`);
                });
            });
        });
        */

        //promise함수로 변환
        function add (num1,num2) {
            return new Promise ((resolve,reject) => {
                setTimeout(() => {
                    const result = num1 + num2;
                    resolve(result);
                },1000);
            });
        }
        function mul (num) {
            return new Promise ((resolve,reject) => {
                setTimeout(() => {
                    const result = num * 2;
                    resolve(result);
                },700);
            });
        }
        function sub (num) {
            return new Promise ((resolve,reject) => {
                setTimeout(() => {
                    const result = num -1 ;
                    resolve(result);
                },500);
            });
        }

        //실행
        add(4,3).then(function(res){
            console.log(`add : ${res}`);
            return mul(res);
        })
        .then(function(res1){
            console.log(`mul: ${res1}`);
            return sub(res1);
        })
        .then(function(res2){
            console.log(`sub: ${res2}`);
        });
        


    </script>
</body>
</html>